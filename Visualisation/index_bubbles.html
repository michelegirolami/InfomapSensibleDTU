<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>D3 Test</title>
		<script type="text/javascript" src="d3/d3.v3.js"></script>
		<style type="text/css"></style>
		<style type="text/css">

			circle {
					stroke: orange;
					stroke-width: 0px;
					opacity: 0.4;
				}


		</style>
	</head>
	<body>
		<script type="text/javascript">



// Canvas parameters
var w = 800;
var h = 300;
var padding = 30;


// Data
var dataset = [];

for (var j = 1; j < 20; j++) {
	for (var i = 1; i < 20; i++) {
		x = Math.round(Math.random() * w)
		y = Math.round(Math.random() * h)
		dataset.push([x, y]);
	}
}

// Scaling
var minX = d3.min(dataset, function(d) { return d[0]; });
var maxX = d3.max(dataset, function(d) { return d[0]; });
var minY = d3.min(dataset, function(d) { return d[1]; });
var maxY = d3.max(dataset, function(d) { return d[1]; });

var scaleX = d3.scale.linear()
					.domain([minX, maxX])
					.range([padding, w-padding]);

var scaleY = d3.scale.linear()
					.domain([minY, maxY])
					.range([h-padding, padding]);


// Plotting
var out = function(d){ 
	//d3.select(this).style({opacity:'0.4'});

}

var over = function(d){ 
	//d3.selectAll(".person")
	//.style({opacity:'0.8'});
	x = Math.round(Math.random() * w)
	y = Math.round(Math.random() * h)
	d3.selectAll(".person1")
	  .transition()
	  .duration(5000)
	  .attr("cy", y)
	  .attr("cx", x)
	  .attr("r", Math.round(Math.random() * 20))
	  .style({"fill": "rgb(0,256," + Math.round(Math.random() * 256) + ")"})
	  .style({"opacity": Math.random()})
}

var svg = d3.select("body")
	.append("svg")
	.attr("width", w)
	.attr("height", h);

var circles1 = svg.selectAll("circle")
	.data(dataset.slice(0,Math.round(dataset.length/2)))
	.enter()
	.append("circle")
	.attr("class", "person1")
	.on('mouseover', over)
	.on('mouseout', out)

var circles2 = svg.selectAll("circle")
	.data(dataset
		.slice(
			Math.round(dataset.length/2), dataset.ldataength+1
			)
		)
	.enter()
	.append("circle")
	.attr("class", "person2")
	.on('mouseover', over)
	.on('mouseout', out)


circles1.attr("cx", function(d, i) {
			return dataset[i][0];
		})
		.attr("cy", function(d) {
			return d[1];
		})
		.attr("r", function(d) { return Math.round(Math.random() * 20); })
		.attr("fill", function(d,i) {
			return "rgb(0,256,0)";
		})




		</script>
	</body>
</html>
